%% -*- erlang -*-
[{erleans, [{grain_provider, [{test_grain, postgres}]},

            {stream_providers, [{vonnegut,
                                 [{module, erleans_vonnegut_provider},
                                  {args, []}]}]},

            {providers, [{ets, [{module, ets_provider},
                                {args, []}]},
                         {postgres, [{module, erleans_pgsql_blob_provider},
                                     {args, [{size, 5},
                                             {host, "0.0.0.0"},
                                             {port, 5432},
                                             {database, "test"},
                                             {user, "test"},
                                             {password, ""}]}]}]},

            {default_provider, postgres},
            {default_stream_provider, vonnegut},

            {db_testing, true},

            {num_partitions, 64}]},

 {vonnegut, [{chain, [{name, chain1},
                      {discovery, local},
                      {port, 5555}]},
             {client, [{endpoints, [{"127.0.0.1", 5555}]}]}]},

 {lasp, [{membership, true},
         {storage_backend, lasp_ets_storage_backend},
         {mode, delta_based},
         {delta_interval, 200}]},

 {plumtree, [{broadcast_exchange_timer, 60000},
             {broadcast_mods, [lasp_plumtree_backend]}]},

 {partisan, [{partisan_peer_service_manager,
              partisan_default_peer_service_manager}]},

 {kernel, [{logger_level, debug},
           {logger, [{filters, log, [{no_progress, {fun logger_filters:progress/2, stop}}]},
                     {handler, default, logger_std_h,
                      #{formatter => {logger_formatter, #{template => [time," ", file,":",line," ",level,": ",msg,"\n"]}}}}]}]}
].
